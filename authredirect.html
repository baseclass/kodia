<!DOCTYPE html>
<html>
    <head>
        <script>

        const params = new URLSearchParams(window.location.search);
        const action = params.get("a");
        const state = params.get("state");

        if (state) {
          const parts = state.split('!');
          const port = parts[parts.length - 1];

          if (/^\d+$/.test(port)) {
            const targetUrl = `http://127.0.0.1:${port}/${action}${location.search}`;
            console.log("Redirecting to:", targetUrl);
            location.href = targetUrl;
          } else {
            console.error("Invalid port extracted from state.");
          }
        } else {
          console.log("No state parameter found.");
        }
        </script>
    </head>
    <body>Something went wrong missing query params</body>
</html>
